postgresql:
  fullnameOverride: postgresql-iam
  auth:
    username: keycloak
    enablePostgresUser: true
    existingSecret: postgres-secret
    secretKeys:
      adminPasswordKey: postgres-root-password
      userPasswordKey: postgres-password
  rbac:
    create: false
  primary:
    persistence:
      enabled: false
    initdb:
      scripts:
        create.sh: |
          psql postgresql://postgres:${POSTGRES_PASSWORD}@localhost:5432 -c "CREATE DATABASE keycloak_iam;"
          psql postgresql://postgres:${POSTGRES_PASSWORD}@localhost:5432 -c "ALTER DATABASE keycloak_iam OWNER TO keycloak;"

mysql:
  nameOverride: mysql-iam
  fullnameOverride: mysql-iam
  auth:
    existingSecret: mysql-secret
  serviceAccount:
    create: false
  primary:
    persistence:
      enabled: false
  secondary:
    persistence:
      enabled: false
  initdbScripts: {}

vcwaltid:
  ingress:
    enabled: false

  fullnameOverride: waltid-iam
  deployment:
    image:
      repository: quay.io/fiware/waltid
      tag: 1.14.1-SNAPSHOT
      pullPolicy: Always
  api:
    core:
      enabled: true
    auditor:
      enabled: true
    signatory:
      enabled: true
    custodian:
      enabled: true
    essif:
      enabled: true

  persistence:
    enabled: false
  templates:
    GaiaXParticipantCredential.json: |
      {
        "@context": [
          "https://www.w3.org/2018/credentials/v1",
          "https://registry.lab.gaia-x.eu/development/api/trusted-shape-registry/v1/shapes/jsonld/trustframework#"
        ],
        "type": [
          "VerifiableCredential"
        ],
        "id": "did:web:raw.githubusercontent.com:egavard:payload-sign:master",
        "issuer": "did:web:raw.githubusercontent.com:egavard:payload-sign:master",
        "issuanceDate": "2023-03-21T12:00:00.148Z",
        "credentialSubject": {
          "id": "did:web:raw.githubusercontent.com:egavard:payload-sign:master",
          "type": "gx:LegalParticipant",
          "gx:legalName": "dsba compliant participant",
          "gx:legalRegistrationNumber": {
            "gx:vatID": "MYVATID"
          },
          "gx:headquarterAddress": {
            "gx:countrySubdivisionCode": "BE-BRU"
          },
          "gx:legalAddress": {
            "gx:countrySubdivisionCode": "BE-BRU"
          },
          "gx-terms-and-conditions:gaiaxTermsAndConditions": "70c1d713215f95191a11d38fe2341faed27d19e083917bc8732ca4fea4976700"
        }
      }
    PacketDeliveryService.json: |
      {
        "@context": ["https://www.w3.org/2018/credentials/v1"],
        "credentialSchema": {
          "id": "https://raw.githubusercontent.com/FIWARE-Ops/tech-x-challenge/main/schema.json",
          "type": "FullJsonSchemaValidator2021"
        },
        "credentialSubject": {
          "type": "gx:NaturalParticipant",
          "familyName": "Happy",
          "firstName": "User",
          "lastName": "Happy",
          "roles": [{
            "names": ["LEGAL_REPRESENTATIVE"],
            "target": "did:web:onboarding"
          }]
        },
        "id": "urn:uuid:3add94f4-28ec-42a1-8704-4e4aa51006b4",
        "issued": "2021-08-30T00:00:00Z",
        "issuer": "did:ebsi:2A9BZ9SUe6BatacSpvs1V5CdjHvLpQ7bEsi2Jb6LdHKnQxaN",
        "validFrom": "2021-08-31T00:00:00Z",
        "issuanceDate": "2021-08-31T00:00:00Z",
        "type": ["PacketDeliveryService"]
      }
    NaturalPersonCredential.json: |
      {
        "@context": ["https://www.w3.org/2018/credentials/v1"],
        "credentialSchema": {
          "id": "https://raw.githubusercontent.com/FIWARE-Ops/tech-x-challenge/main/schema.json",
          "type": "FullJsonSchemaValidator2021"
        },
        "credentialSubject": {
          "type": "gx:NaturalParticipant",
          "familyName": "Happy",
          "firstName": "User",
          "roles": [{
            "names": ["LEGAL_REPRESENTATIVE"],
            "target": "did:web:onboarding"
          }]
        },
        "id": "urn:uuid:3add94f4-28ec-42a1-8704-4e4aa51006b4",
        "issued": "2021-08-31T00:00:00Z",
        "issuer": "did:ebsi:2A9BZ9SUe6BatacSpvs1V5CdjHvLpQ7bEsi2Jb6LdHKnQxaN",
        "validFrom": "2021-08-31T00:00:00Z",
        "issuanceDate": "2021-08-31T00:00:00Z",
        "type": ["VerifiableCredential", "LegalPersonCredential"]
      }

keycloak:
  fullnameOverride: keycloak-iam
  frontendUrl: http://localhost:8080
  issuerDid: did:key:z6MkigCEnopwujz8Ten2dzq91nvMjqbKQYcifuZhqBsEkH7g
  realm:
    clients:
      - did: did:key:z6MksU6tMfbaDzvaRe5oFE4eZTVTV4HJM4fmQWWGsDGQVsEr
        description: Client to connect to some service
        roles:
          - name: LEGAL_REPRESENTATIVE
            description: Is allowed to register participants
          - name: STANDARD_CUSTOMER
            description: User to access PacketDelivery with read access
          - name: GOLD_CUSTOMER
            description: User to access PacketDelivery with read/write access
        verifiableCredentials:
          - name: PacketDeliveryService
            types:
              - ldp_vc
              - jwt_vc_json
            claims:
              - email
              - firstName
              - lastName
              - roles
    users:
      - username: prime-user
        password: prime-user
        clientRoles:
          - clientDid: did:key:z6MksU6tMfbaDzvaRe5oFE4eZTVTV4HJM4fmQWWGsDGQVsEr
            roles:
              - GOLD_CUSTOMER
  image:
    tag: 21.1.2-debian-11-r1
  service:
    type: LoadBalancer
    ports:
      http: 8080
  logging:
    level: INFO
  replicaCount: 1
  auth:
    adminUser: fiwareAdmin
    adminPassword: fiwareAdmin
  serviceAccount:
    create: false
  rbac:
    create: false
  ingress:
    enabled: false
  keycloakConfigCli:
    enabled: true
    # current image does not contain 20.0.3., thus we need this fix
    command:
      - java
      - -jar
      - /opt/bitnami/keycloak-config-cli/keycloak-config-cli-20.0.1.jar
    containerSecurityContext:
      enabled: false
    podSecurityContext:
      enabled: false
    existingConfigmap: keycloak-iam-realm
  extraEnvVars:
    - name: KEYCLOAK_PROXY_ADDRESS_FORWARDING
      value: "true"
    - name: KEYCLOAK_LOG_LEVEL
      value: INFO
    - name: VCISSUER_ISSUER_DID
      value: "did:key:z6MkigCEnopwujz8Ten2dzq91nvMjqbKQYcifuZhqBsEkH7g"
    - name: VCISSUER_WALTID_ADDRESS
      value: "http://waltid-iam"
  extraVolumeMounts:
    - name: profiles
      mountPath: /opt/bitnami/keycloak/conf/profile.properties
      subPath: profile.properties
    - name: providers
      mountPath: /opt/bitnami/keycloak/providers/
    - name: issuer-key
      mountPath: /opt/keys
    - name: data
      mountPath: /data
  extraVolumes:
    - name: data
      emptyDir: {}
    - name: profiles
      configMap:
        name: keycloak-iam-profile
    - name: providers
      emptyDir: {}
    - name: issuer-key
      configMap:
        name: keycloak-iam-key
    - name: did-config
      configMap:
        name: keycloak-iam-did-config
  initContainers:
    - name: add-vc-issuer
      image: quay.io/fiware/keycloak-vc-issuer:1.0.2
      imagePullPolicy: Always
      volumeMounts:
        - name: providers
          mountPath: /target
    - name: load-did
      image: quay.io/opencloudio/curl:4.2.0-build.8
      imagePullPolicy: Always
      command:
        - /bin/sh
        - /opt/did/script/import.sh
      env:
        - name: WALTID_CORE_ADDRESS
          value: "waltid-iam:7000"
      volumeMounts:
        - name: did-config
          mountPath: /opt/did/script
        - name: issuer-key
          mountPath: /opt/keys
  postgresql:
    enabled: false
  externalDatabase:
    host: postgresql-iam
    user: postgres
    database: keycloak_iam
    existingSecret: postgres-secret
    existingSecretPasswordKey: postgres-password

credentials-config-service:
  fullnameOverride: ccs-iam
  deployment:
    image:
      repository: quay.io/fiware/credentials-config-service
      tag: 1.0.1
  database:
    persistence: false
  service:
    type: LoadBalancer
    port: 4040

trusted-issuers-list:
  fullnameOverride: til-iam
  route:
    til:
      enabled: false
      certificate:
    tir:
      enabled: false
      certificate:
  ingress:
    til:
      enabled: false
    tir:
      enabled: false
  deployment:
    image:
      tag: 0.2.0
  service:
    port: 5050
    type: LoadBalancer
  database:
    persistence: false

trusted-issuers-registry:
  fullnameOverride: tir-iam
  replicaCount: 1
  deployment:
    image:
      tag: 0.6.0
      pullPolicy: Always
    additionalLabels:
      participant: onboarding
  route:
    enabled: false
    certificate:
  tir:
    ngsiBroker:
      url: http://orion-ld:1026/
    contextUrl: "https://registry.lab.dsba.eu/development/api/trusted-shape-registry/v1/shapes/jsonld/trustframework#"
    satellite:
      id: "EU.EORI.FIWARESATELLITE"
      key: |
        -----BEGIN RSA PRIVATE KEY-----
        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
        -----END RSA PRIVATE KEY-----
      certificate: |
        -----BEGIN CERTIFICATE-----
        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
        -----END CERTIFICATE-----
        -----BEGIN CERTIFICATE-----
        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
        jDOUKVLp
        -----END CERTIFICATE-----
        -----BEGIN CERTIFICATE-----
        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
        Zqat8t/baTS3TUdIKg==
        -----END CERTIFICATE-----

      trustedList:
        - name: FIWARE_CA
          crt: |
            -----BEGIN CERTIFICATE-----
            MIIGCTCCA/GgAwIBAgIUE4eZnRRqaub9kC+3PqDYNfVU8IcwDQYJKoZIhvcNAQEL
            BQAwgZMxCzAJBgNVBAYTAkRFMQ8wDQYDVQQIDAZCZXJsaW4xDzANBgNVBAcMBkJl
            cmxpbjEfMB0GA1UECgwWRml3YXJlIEZvdW5kYXRpb24gZS5WLjELMAkGA1UECwwC
            SVQxEjAQBgNVBAMMCUZJV0FSRV9DQTEgMB4GCSqGSIb3DQEJARYRZml3YXJlQGZp
            d2FyZS5vcmcwHhcNMjIxMTA5MDcyNDU2WhcNMzIxMTA2MDcyNDU2WjCBkzELMAkG
            A1UEBhMCREUxDzANBgNVBAgMBkJlcmxpbjEPMA0GA1UEBwwGQmVybGluMR8wHQYD
            VQQKDBZGaXdhcmUgRm91bmRhdGlvbiBlLlYuMQswCQYDVQQLDAJJVDESMBAGA1UE
            AwwJRklXQVJFX0NBMSAwHgYJKoZIhvcNAQkBFhFmaXdhcmVAZml3YXJlLm9yZzCC
            AiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAOoPnXAtWFG6Bsdr4TvBUW12
            wpcRYH9fiDm5Mc6g6VdiL9I1tWMbhfO7DPyOaoqh6xloDL+XoeREmoIfJJpY3bdu
            zPswTinaMd7H+aMP6wWDsAIABhmw5Pui3UbpUZeFeo3RMe5f8JjL4KPgjWCX1llx
            O6yxy1e8gSfGpBkEHpJc8lKQwDE9zgyuiOLRUPRtSe0NJajcBrrXiaSPGdXvG39N
            YzjAARo5PAEBG+UHHzZFeS11MT+GbryZrx9KbdmVshdlsGqL/2sTY9veFrz53XLR
            Gmq86U+IQZEEvp6Z5k5ZwamBiACiRDbSwh1Ngp+BKNG26wCvB4gfxTOuSHIfzRkP
            D8vdV7mZwyeFHXogsNqF/8Pmdy0ONcqThh7w7lUFMVygk9q531n6QGRRpwCgKAjy
            jYN5r2Mo68+tmxNCejIPpo/JsAEKlPsh9lH7KhSEjIaHx//Q2f/nll1Z4GkXj7Sk
            ALz3P4ljT3ePeT2wnlSpyrCEPIeMXT47Z2xdc9MgXhqxidep7sUWFMaJwKhq1m1U
            JXI216GKUN3y//WSvRu7tqzyuUR9qsfY946EUF6m4XQjj9wke6H7vTpY9U/zwc9j
            yx+fXnJiuYht6k2cHav9GK0wnZ5Ct6A1+43eRR43EJ11OM9Ml+J4tdfukSrW6ppm
            z+4Yxfe5RRtzPeXxncjbAgMBAAGjUzBRMB0GA1UdDgQWBBRZwTAD5TRzmlA2f7mG
            VfkSFqJkJzAfBgNVHSMEGDAWgBRZwTAD5TRzmlA2f7mGVfkSFqJkJzAPBgNVHRMB
            Af8EBTADAQH/MA0GCSqGSIb3DQEBCwUAA4ICAQDGFxElC2Sq6/EOcbzQ7tjaqc5d
            v2FCWTTQYQLiS+VQqcJqGnMnEwWUDCeacQ6BaxdTW+jb1zX66DgfNJ40Yr2YDVv4
            qr+KKCW+q8cKQUte/XmcpLJtrXtYZQMeLUfwBlF2yAvmb3/2cda0VIhsem2BIFCE
            227+wOYqHSqpkqfVcizljnYLTwvTBQz5P0Jq9/wPcjB7fxfko2mZjaPQFfEuLPMT
            Jttv7711TJCrp0gzmnICS1Ba3vtcdZN+rd6IoSQmudnOcGDJkslL77T4BzjXDkax
            fuCoQ6f/hwXJuJF3fQHd6OsJHDgVAJQ78Nyb5P/2KMpdY/nkudeBG3ZcEJP7uptc
            QnWmMMLbfuGuXmAvXyKJJ3bw01F9+Vfo5OLud4IVnv0QDlXLHBDdGErBTT6m5XZN
            SyBXbqp1xIui+Jufm4HY0Y7kX0QzfSHdMXWgiIdmR8z0x15PQg/uFihXjp/RyqDr
            G+Tin3TXBqJRdDxYCwdnoutQnqtYCbsidoLv2ZA0vQiGfykPMpU49dGKwVCZBw1y
            Lf8X0QG5Vxp9O42jXzSy5rYwrF76FTpy+h7UqmZNOBXJG1roKrQWZ2OieFMp/rTD
            YURyhqWqqW2u7UehYs6emmSwYv8j0v4CzpH517jp2RJNyinI3TZmgD0AAKzyJAl/
            Zqat8t/baTS3TUdIKg==
            -----END CERTIFICATE-----
      parties:
        - id: "EU.EORI.HAPPYPETS"
          did: "did:key:z6MkigCEnopwujz8Ten2dzq91nvMjqbKQYcifuZhqBsEkH7g"
          name: "HappyPets Inc."
          status: "Active"
          start_date: "2021-09-27T00:00:00Z"
          end_date: "2051-09-27T00:00:00Z"
          crt: |
            -----BEGIN CERTIFICATE-----
            MIIGejCCBGKgAwIBAgIUUliLPK6R7OeviNDRY2dtI/G7YQAwDQYJKoZIhvcNAQEL
            BQAwgYwxCzAJBgNVBAYTAkRFMQ8wDQYDVQQIDAZCZXJsaW4xHzAdBgNVBAoMFkZp
            d2FyZSBGb3VuZGF0aW9uIGUuVi4xCzAJBgNVBAsMAklUMRwwGgYDVQQDDBNGSVdB
            UkVfSU5URVJNRURJQVRFMSAwHgYJKoZIhvcNAQkBFhFmaXdhcmVAZml3YXJlLm9y
            ZzAeFw0yMjExMDkwNzQxNTJaFw0yNzExMDgwNzQxNTJaMIGYMQswCQYDVQQGEwJE
            RTEPMA0GA1UECAwGQmVybGluMQ8wDQYDVQQHDAZCZXJsaW4xEjAQBgNVBAoMCUhh
            cHB5UGV0czESMBAGA1UEAwwJSEFQUFlQRVRTMSMwIQYJKoZIhvcNAQkBFhRoYXBw
            eXBldHNAZml3YXJlLm9yZzEaMBgGA1UEBRMRRVUuRU9SSS5IQVBQWVBFVFMwggIi
            MA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQCseGMdUsXPO47dYSc163OwFX+7
            dEjA0cysU81jO/KuNoaWxXqSb34xe6f6qhdnlITuObfg5G2UIqK3fgfCQBua+c8g
            auK/3vfXvPQkJAlXg4ZNzBsASk/a9yDuF+LbcCz8yTDOC2JggD1gXoOLoSFimtYU
            1yoFljRbkSpg2sXL7+UA6X8TkxmNx0rTkJdZoj1015peiMpBgXJb5NCblf87ImPN
            vKhSbpMAGEpkQ7TfnddsiEcMg8Jy4tg+u266dqOxSvq/XlsbjKzjeb0cdz0+8Kal
            WAiM4DkQ20okF8gd9I1vLXBEF5McvvIEbFio3JYvIiPQtd/AVVQH4HHPHJFaIe2K
            KvTH2UUo8XzbzNPL5jsLQC1jTwCJMN4E4kT8QKCRMujOnrsMJ9afrxg16sOONq2o
            gHKe6sAC4cvZSvTtXn0cVG9dRB9O8Z6UEkHLrWK/xJED5Nm5DRo1oWkHXfpIi/A/
            sJQ5hjyXCEE6O9N2ylzFfPWFyTAdcCKDRx7ZkTggWddZ3pFd5oCXap9viTVz0W8t
            ZLBWSCilP70ceGA1DQUQL4pWdAHlKjY4X7lfvrhoAyL1Xs3jFWhxGRdiTHEGgVP8
            crug+CQKgvKZNSA8BH6Dw8jziKMXoBD1IL/+B4xkyj+0DdQTTInV5uQ4QTChUpNR
            vE6rVyfIUWJsU7Y/jQIDAQABo4HFMIHCMAkGA1UdEwQCMAAwEQYJYIZIAYb4QgEB
            BAQDAgWgMDMGCWCGSAGG+EIBDQQmFiRPcGVuU1NMIEdlbmVyYXRlZCBDbGllbnQg
            Q2VydGlmaWNhdGUwHQYDVR0OBBYEFJxCBaUbfht9dHD2AUL7zmErU8BGMB8GA1Ud
            IwQYMBaAFCdVXai4piVrVEDg/6LNuF4f0o0OMA4GA1UdDwEB/wQEAwIF4DAdBgNV
            HSUEFjAUBggrBgEFBQcDAgYIKwYBBQUHAwQwDQYJKoZIhvcNAQELBQADggIBAIfC
            ViBTqtSgCBCZh4iU8duC2yg6itta2qtifk43OP+R1YL9Cq6qvm/o9EkyLmg5qc1n
            8wwo/ow954bqX0/fLdl5Sf//Kp1wQSIauDhUNoPOCNZF00kB8L5ckw6jB0Pl7JXc
            ys0EuADBVGpWRqAzTzqaYaWHCu61GNYAR4Wc405DI+aLP+0GSF3yqgm4w+Bn2yXZ
            0BeVzKDX4G/5Gi7AaOXBv6qASp+5J85W0hQSAfEb3O7NJWahTPv+RkP4zJcAUw0l
            AiwaPU6RE3LmfDHpGwDdL6ejoSHc3qMYFHnoMFn+7Sn+B47aUbzrJlB7TiQmS1d3
            SMt25rOg3XaUa1tktSwA9ttz5A8c/OqjQU81XOZ8V6Bg6otU2p7eukpuxQTomSXp
            1yYjtMOMnsfydeQvlO1kgg7Ubtzolu+ohr37Q+X9pJ/TsWpLOtqdUwyWGStZbp7h
            uwXRSRwcT7T/oq6fc2Kw0pe8Zld0JJXdkyugvXR+sq/UKg1IUwuz1VaRdo7tklHv
            yq0SKSr58XnA7pZwNV1o0CM0meLF9JRA2chhB+Gr3K8VSv7NWFhhn2qvMCc85Bqz
            Od2E6aQ2DxiSawCPF4BBzpwuJRiMAnttIjisLOTiV4EKb/ClgD0kYSgBQOrZ+5bc
            h21jS/PeIff69pYEm0CM6CSPq1S5Y+fNopI+KaWe
            -----END CERTIFICATE-----
        - id: "EU.EORI.PACKETDELIVERY"
          name: "PacketDelivery"
          did: "did:key:z6MksU6tMfbaDzvaRe5oFE4eZTVTV4HJM4fmQWWGsDGQVsEr"
          status: "Active"
          start_date: "2021-09-27T00:00:00Z"
          end_date: "2051-09-27T00:00:00Z"
          crt: |
            -----BEGIN CERTIFICATE-----
            MIIGjjCCBHagAwIBAgIUUliLPK6R7OeviNDRY2dtI/G7YQEwDQYJKoZIhvcNAQEL
            BQAwgYwxCzAJBgNVBAYTAkRFMQ8wDQYDVQQIDAZCZXJsaW4xHzAdBgNVBAoMFkZp
            d2FyZSBGb3VuZGF0aW9uIGUuVi4xCzAJBgNVBAsMAklUMRwwGgYDVQQDDBNGSVdB
            UkVfSU5URVJNRURJQVRFMSAwHgYJKoZIhvcNAQkBFhFmaXdhcmVAZml3YXJlLm9y
            ZzAeFw0yMjExMDkwNzQ5MDRaFw0yNzExMDgwNzQ5MDRaMIGsMQswCQYDVQQGEwJE
            RTEPMA0GA1UECAwGQmVybGluMQ8wDQYDVQQHDAZCZXJsaW4xFzAVBgNVBAoMDlBh
            Y2tldERlbGl2ZXJ5MRcwFQYDVQQDDA5QQUNLRVRERUxJVkVSWTEoMCYGCSqGSIb3
            DQEJARYZcGFja2V0ZGVsaXZlcnlAZml3YXJlLm9yZzEfMB0GA1UEBRMWRVUuRU9S
            SS5QQUNLRVRERUxJVkVSWTCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIB
            AM3e8akLPmCvoBPq/PfuRnutWoEUmVfixq5Zx51Ilkrea7X9MHuerqphjbWqL7Wy
            /GlSChwhyhNjrVRCkCswf8S4DoW2uEx51WuNFuuEa71JJQykcGdLw5NMwPKJLsbZ
            lc9S2BUeoy9SI4wa9qqlYtPMEdof/UIYTxxEe+Q3Tq392WjpZtpQVbCmq4c+8VrB
            PJo3FvOHGjExG1ImduevU3lv+p/fOR+djDNWq9+1dOk2wfCUrVZWrKlxHn03OUvr
            5r0edI+jpxt4474lQ/eNhdpwHrdAOVaSHV2ErZIeuhxNyZX+gqxFYlm5Ado9dHrW
            soWDcw9PF/m+0K0SHxfOwy81YxoUBTZV/vL/7LKDDEt0qxrLrJzrha3zFcIwH+4S
            aLzLC1fNK8PVV4CttuOqwPe6ZOlkR+b5czcgvg4iIBvoBITVF9/syiciN7Il/ZUW
            cW98Opwrl9eRz6e1RTRlsSxN4n/mwkxBk3AhBNhyqNWj1ACLMtr3mm4MY9g8Ej0L
            8RxACreB8PofzlZ+WMch1Y1iwSd4a4rwLMwh8vpTuF6dvl4jBmJiTJzY6XXZaogQ
            mLOv1Be0oQBdgffnWzbz8he9S1HBVTdzUWfxF9cSKN/frEF2TOGyhLm2CERequTa
            CgLnUnSl+I3vi4ujpyIPQC/IZc4cca0EqZu/z+5I/GfHAgMBAAGjgcUwgcIwCQYD
            VR0TBAIwADARBglghkgBhvhCAQEEBAMCBaAwMwYJYIZIAYb4QgENBCYWJE9wZW5T
            U0wgR2VuZXJhdGVkIENsaWVudCBDZXJ0aWZpY2F0ZTAdBgNVHQ4EFgQUOq9k3TRF
            K5CRaKtCFXRXyNqKUZcwHwYDVR0jBBgwFoAUJ1VdqLimJWtUQOD/os24Xh/SjQ4w
            DgYDVR0PAQH/BAQDAgXgMB0GA1UdJQQWMBQGCCsGAQUFBwMCBggrBgEFBQcDBDAN
            BgkqhkiG9w0BAQsFAAOCAgEAH/KBoC1ejUeVnuOf0yTQveiMX6qAcIX+ogV7eqL5
            XMh+X/qbHbJMVfPW2xK8Dyy+e8gku5dZS6dIRKcoOmDDytfTZ6mQ3qGvWUERJs1l
            9wM1J88C9S//hw1scBFeZXFwNpQ3UNtaEq5qfl6DjrD+4rH2B25A2zoadLqCcHiH
            hWXmyEKpWE0yRbc2i7mzUMFtTAbAaQvLDYpRFapTaFCTjFZ6OfQwKqbVNTjC1Inh
            CHwAje0mFLNWnXo/xSzItMAHiHtz9FxtZw5ENIOO/keRC1VST2080nCcc3zpqOh1
            FdW3GyqKOkRjVRGBqg+M7/0tSSRvvzCgFZgdOno3axsxWEPhCTM1b4DPeC8/GRBS
            WQcXxRznIRnd6lXwLqpMhDfCeV6QvCQC4+FrAEEGbF8Fz/+c93BXdqYsn3UCyPUL
            D/k+n+LP085914LsOYWAW/8VcCobXrhjSgJwX+1GzLHvXjU8UQXWZfVw8b3iJmOK
            FsEpHPxnWv2lqI7kCMcFkBttApBPnZXlcybQjLUB7oEFR9bPdOkpIl9v/mPXe7BI
            npYZZVBUG8xPmCR6+FYw4LSVolZ1j6DF3INFEvRxPtU/mfyQmxjw1v6tw+F/h42V
            P9Nrp6bSaptSPOVYZx9JjTNCm3FAwYP09Phnt8+WgOdg7OYMRC+ACN9mev+uephO
            /3o=
            -----END CERTIFICATE-----
    additionalConfigs:
      logger:
        levels:
          ROOT: ERROR
          org.fiware.iam: DEBUG

vcverifier:
  fullnameOverride: verifier-iam
  deployment:
    image:
      repository: quay.io/fiware/vcverifier
      tag: 2.8.0
      pullPolicy: Always
    logging:
      level: DEBUG
      pathsToSkip:
        - "/health"
    ssikit:
      auditorUrl: http://waltid-iam:7003
    verifier:
      tirAddress: https://tir-iam/v4/issuers
      did: did:key:z6MksU6tMfbaDzvaRe5oFE4eZTVTV4HJM4fmQWWGsDGQVsEr
    configRepo:
      configEndpoint: http://ccs-iam:4040/
  route:
    enabled: false
    certificate:
  service:
    type: LoadBalancer
    port: 7070

keyrock:
  fullnameOverride: keyrock-iam
  service:
    type: LoadBalancer
    port: 5080
  statefulset:
    image:
      repository: quay.io/wi_stefan/keyrock
      tag: sn-fix-2
      pullPolicy: IfNotPresent
  db:
    user: root
    host: mysql-iam
    password: password
  existingSecret: keyrock-secret
  host: http://keyrock-iam
  route:
    enabled: false
  authorisationRegistry:
    enabled: true
    identifier: "did:key:z6MkigCEnopwujz8Ten2dzq91nvMjqbKQYcifuZhqBsEkH7g"
    url: "internal"
  satellite:
    enabled: true
    identifier: "EU.EORI.FIWARESATELLITE"
    url: "http://tir-iam"
    tokenEndpoint: "http://tir-iam/token"
    partiesEndpoint: "http://tir-iam/parties"
  additionalEnvVars:
    - name: IDM_TITLE
      value: "DOME IAM AR"
    - name: IDM_DEBUG
      value: "true"
    - name: DEBUG
      value: "*"
    - name: IDM_DB_NAME
      value: bp_one_idm
    - name: IDM_DB_SEED
      value: "true"
    - name: IDM_SERVER_MAX_HEADER_SIZE
      value: "32768"
    - name: IDM_PR_CLIENT_ID
      value: "did:key:z6MksU6tMfbaDzvaRe5oFE4eZTVTV4HJM4fmQWWGsDGQVsEr"
    - name: IDM_PR_CLIENT_KEY
      valueFrom:
        secretKeyRef:
          name: keyrock-ar-sec
          key: key
    - name: IDM_PR_CLIENT_CRT
      valueFrom:
        secretKeyRef:
          name: keyrock-ar-sec
          key: cert
  initData:
    backoffLimit: 50
    initEnabled: true
    image: quay.io/wi_stefan/mysql:5.7
    command:
      - /bin/sh
      - /scripts/create.sh
    volumeMount:
      name: scripts
      mountPath: /scripts
    env:
      - name: DB_PASSWORD
        value: "password"
    scriptData:
      create.sh: |-
        mysql -h mysql-iam -u root -p$DB_PASSWORD bp_one_idm <<EOF

        -- Static objects
        SET @rules := JSON_ARRAY(
          JSON_OBJECT(
            "effect", "Permit"
          )
        );

        SET @subjectProvider := "PROVIDER";
        SET @subjectConsumer := "CONSUMER";
        SET @subjectLear := "LEGAL_REPRESENTATIVE";
        SET @subjectGold := "GOLD_CUSTOMER";
        SET @subjectStandard := "STANDARD_CUSTOMER";

        -- Policies Gold
        SET @policiesGold := JSON_ARRAY(
          JSON_OBJECT(
            "rules", CAST(@rules as JSON),
            "target", JSON_OBJECT(
              "actions", JSON_ARRAY("PATCH"),
              "resource", JSON_OBJECT(
                "type", "DELIVERYORDER",
                "attributes", JSON_ARRAY("pta","pda"),
                "identifiers", JSON_ARRAY("*")
              )
            )
          ),
          JSON_OBJECT(
            "rules", CAST(@rules as JSON),
            "target", JSON_OBJECT(
              "actions", JSON_ARRAY("GET"),
              "resource", JSON_OBJECT(
                "type", "DELIVERYORDER",
                "attributes", JSON_ARRAY("*"),
                "identifiers", JSON_ARRAY("*")
              )
            )
          )
        );

        -- Policies Lear 
        SET @policiesLear := JSON_ARRAY(
          JSON_OBJECT(
            "rules", CAST(@rules as JSON),
            "target", JSON_OBJECT(
              "actions", JSON_ARRAY("GET", "POST", "PUT"),
              "resource", JSON_OBJECT(
                "type", "PATH",
                "identifiers", JSON_ARRAY("/tmf-api/party/*")
              )
            )
          )
        );

        -- Policies Consumer
        SET @policiesConsumer := JSON_ARRAY(
          JSON_OBJECT(
            "rules", CAST(@rules as JSON),
            "target", JSON_OBJECT(
              "actions", JSON_ARRAY("GET"),
              "resource", JSON_OBJECT(
                "type", "PATH",
                "identifiers", JSON_ARRAY("/tmf-api/party/*")
              )
            )
          ),
          JSON_OBJECT(
            "rules", CAST(@rules as JSON),
            "target", JSON_OBJECT(
              "actions", JSON_ARRAY("GET"),
              "resource", JSON_OBJECT(
                "type", "PATH",
                "identifiers", JSON_ARRAY("/tmf-api/productCatalogManagement/*")
              )
            )
          ),
          JSON_OBJECT(
            "rules", CAST(@rules as JSON),
            "target", JSON_OBJECT(
              "actions", JSON_ARRAY("GET","POST","PUT"),
              "resource", JSON_OBJECT(
                "type", "PATH",
                "identifiers", JSON_ARRAY("/tmf-api/productOrderingManagement/*")
              )
            )
          )
        );

        -- Policies Provider
        SET @policiesProvider := JSON_ARRAY(
          JSON_OBJECT(
            "rules", CAST(@rules as JSON),
            "target", JSON_OBJECT(
              "actions", JSON_ARRAY("GET","POST"),
              "resource", JSON_OBJECT(
                "type", "PATH",
                "identifiers", JSON_ARRAY("/tmf-api/party/*")
              )
            )
          ),
          JSON_OBJECT(
            "rules", CAST(@rules as JSON),
            "target", JSON_OBJECT(
              "actions", JSON_ARRAY("GET","POST","PUT","DELETE"),
              "resource", JSON_OBJECT(
                "type", "PATH",
                "identifiers", JSON_ARRAY("/tmf-api/customerBillManagement/*")
              )
            )
          ),
          JSON_OBJECT(
            "rules", CAST(@rules as JSON),
            "target", JSON_OBJECT(
              "actions", JSON_ARRAY("GET","POST","PUT","DELETE"),
              "resource", JSON_OBJECT(
                "type", "PATH",
                "identifiers", JSON_ARRAY("/tmf-api/customerManagement/*")
              )
            )
          ),
          JSON_OBJECT(
            "rules", CAST(@rules as JSON),
            "target", JSON_OBJECT(
              "actions", JSON_ARRAY("GET","POST","PUT","DELETE"),
              "resource", JSON_OBJECT(
                "type", "PATH",
                "identifiers", JSON_ARRAY("/tmf-api/productCatalogManagement/*")
              )
            )
          ),
          JSON_OBJECT(
            "rules", CAST(@rules as JSON),
            "target", JSON_OBJECT(
              "actions", JSON_ARRAY("GET","POST","PUT","DELETE"),
              "resource", JSON_OBJECT(
                "type", "PATH",
                "identifiers", JSON_ARRAY("/tmf-api/productInventory/*")
              )
            )
          ),
          JSON_OBJECT(
            "rules", CAST(@rules as JSON),
            "target", JSON_OBJECT(
              "actions", JSON_ARRAY("GET","POST","PUT","DELETE"),
              "resource", JSON_OBJECT(
                "type", "PATH",
                "identifiers", JSON_ARRAY("/tmf-api/productOrderingManagement/*")
              )
            )
          ),
          JSON_OBJECT(
            "rules", CAST(@rules as JSON),
            "target", JSON_OBJECT(
              "actions", JSON_ARRAY("GET","POST","PUT","DELETE"),
              "resource", JSON_OBJECT(
                "type", "PATH",
                "identifiers", JSON_ARRAY("/tmf-api/resourceCatalog/*")
              )
            )
          ),
          JSON_OBJECT(
            "rules", CAST(@rules as JSON),
            "target", JSON_OBJECT(
              "actions", JSON_ARRAY("GET","POST","PUT","DELETE"),
              "resource", JSON_OBJECT(
                "type", "PATH",
                "identifiers", JSON_ARRAY("/tmf-api/resourceFunctionActivation/*")
              )
            )
          ),
          JSON_OBJECT(
            "rules", CAST(@rules as JSON),
            "target", JSON_OBJECT(
              "actions", JSON_ARRAY("GET","POST","PUT","DELETE"),
              "resource", JSON_OBJECT(
                "type", "PATH",
                "identifiers", JSON_ARRAY("/tmf-api/resourceInventoryManagement/*")
              )
            )
          ),
          JSON_OBJECT(
            "rules", CAST(@rules as JSON),
            "target", JSON_OBJECT(
              "actions", JSON_ARRAY("GET","POST","PUT","DELETE"),
              "resource", JSON_OBJECT(
                "type", "PATH",
                "identifiers", JSON_ARRAY("/tmf-api/serviceCatalogManagement/*")
              )
            )
          )
        );


        -- Policies Standard
        SET @policiesStandard := JSON_ARRAY(
          JSON_OBJECT(
            "rules", CAST(@rules as JSON),
            "target", JSON_OBJECT(
              "actions", JSON_ARRAY("GET"),
              "resource", JSON_OBJECT(
                "type", "DELIVERYORDER",
                "attributes", JSON_ARRAY("*"),
                "identifiers", JSON_ARRAY("*")
              )
            )
          )
        );

        -- Insert Delegation Evidence Gold VC
        SET @delegationGoldVC := JSON_OBJECT(
          "target", JSON_OBJECT(
            "accessSubject", @subjectGold
          ),
          "notBefore", 1616583866,
          "notOnOrAfter", 1735817171,
          "policyIssuer", "did:key:z6MkigCEnopwujz8Ten2dzq91nvMjqbKQYcifuZhqBsEkH7g",
          "policySets", JSON_ARRAY(
            JSON_OBJECT(
              "target", JSON_OBJECT(
                "environment", JSON_OBJECT(
                  "licenses", JSON_ARRAY("ISHARE.0001")
                )
              ),
              "policies", CAST(@policiesGold as JSON)
            )
          )
        );
        INSERT IGNORE INTO delegation_evidence (policy_issuer, access_subject,policy) VALUES ("did:key:z6MkigCEnopwujz8Ten2dzq91nvMjqbKQYcifuZhqBsEkH7g", @subjectGold, @delegationGoldVC);

        -- Insert Delegation Evidence Provider VC
        SET @delegationProviderVC := JSON_OBJECT(
          "target", JSON_OBJECT(
            "accessSubject", @subjectProvider
          ),
          "notBefore", 1616583866,
          "notOnOrAfter", 1735817171,
          "policyIssuer", "did:key:z6MkigCEnopwujz8Ten2dzq91nvMjqbKQYcifuZhqBsEkH7g",
          "policySets", JSON_ARRAY(
            JSON_OBJECT(
              "target", JSON_OBJECT(
                "environment", JSON_OBJECT(
                  "licenses", JSON_ARRAY("ISHARE.0001")
                )
              ),
              "policies", CAST(@policiesProvider as JSON)
            )
          )
        );
        INSERT IGNORE INTO delegation_evidence (policy_issuer, access_subject,policy) VALUES ("did:key:z6MkigCEnopwujz8Ten2dzq91nvMjqbKQYcifuZhqBsEkH7g", @subjectProvider, @delegationProviderVC);

        -- Insert Delegation Evidence Lear VC
        SET @delegationLearVC := JSON_OBJECT(
          "target", JSON_OBJECT(
            "accessSubject", @subjectlear
          ),
          "notBefore", 1616583866,
          "notOnOrAfter", 1735817171,
          "policyIssuer", "did:key:z6MkigCEnopwujz8Ten2dzq91nvMjqbKQYcifuZhqBsEkH7g",
          "policySets", JSON_ARRAY(
            JSON_OBJECT(
              "target", JSON_OBJECT(
                "environment", JSON_OBJECT(
                  "licenses", JSON_ARRAY("ISHARE.0001")
                )
              ),
              "policies", CAST(@policiesLear as JSON)
            )
          )
        );
        INSERT IGNORE INTO delegation_evidence (policy_issuer, access_subject,policy) VALUES ("did:key:z6MkigCEnopwujz8Ten2dzq91nvMjqbKQYcifuZhqBsEkH7g", @subjectLear, @delegationLearVC);



        -- Insert Delegation Evidence Consumer VC
        SET @delegationConsumerVC := JSON_OBJECT(
          "target", JSON_OBJECT(
            "accessSubject", @subjectConsumer
          ),
          "notBefore", 1616583866,
          "notOnOrAfter", 1735817171,
          "policyIssuer", "did:key:z6MkigCEnopwujz8Ten2dzq91nvMjqbKQYcifuZhqBsEkH7g",
          "policySets", JSON_ARRAY(
            JSON_OBJECT(
              "target", JSON_OBJECT(
                "environment", JSON_OBJECT(
                  "licenses", JSON_ARRAY("ISHARE.0001")
                )
              ),
              "policies", CAST(@policiesConsumer as JSON)
            )
          )
        );
        INSERT IGNORE INTO delegation_evidence (policy_issuer, access_subject,policy) VALUES ("did:key:z6MkigCEnopwujz8Ten2dzq91nvMjqbKQYcifuZhqBsEkH7g", @subjectConsumer, @delegationConsumerVC);

        -- Insert Delegation Evidence Standard VC
        SET @delegationStandardVC := JSON_OBJECT(
          "target", JSON_OBJECT(
            "accessSubject", @subjectStandard
          ),
          "notBefore", 1616583866,
          "notOnOrAfter", 1735817171,
          "policyIssuer", "did:key:z6MkigCEnopwujz8Ten2dzq91nvMjqbKQYcifuZhqBsEkH7g",
          "policySets", JSON_ARRAY(
            JSON_OBJECT(
              "target", JSON_OBJECT(
                "environment", JSON_OBJECT(
                  "licenses", JSON_ARRAY("ISHARE.0001")
                )
              ),
              "policies", CAST(@policiesStandard as JSON)
            )
          )
        );
        INSERT IGNORE INTO delegation_evidence (policy_issuer, access_subject,policy) VALUES ("did:key:z6MkigCEnopwujz8Ten2dzq91nvMjqbKQYcifuZhqBsEkH7g", @subjectStandard, @delegationStandardVC);

        COMMIT;
        EOF

dsba-pdp:
  fullnameOverride: pdp-iam
  db:
    enabled: false
    migrate:
      enabled: false
  deployment:
    image:
      pullPolicy: Always
      repository: quay.io/fiware/dsba-pdp
      tag: 1.2.0
    logLevel: TRACE
    ishare:
      existingSecret: keyrock-ar-sec
      clientId: EU.EORI.PACKETDELIVERY
      trustedFingerprints:
        - MYFINGERPRINT
      ar:
        id: "did:key:z6MksU6tMfbaDzvaRe5oFE4eZTVTV4HJM4fmQWWGsDGQVsEr"
        delegationPath: "/ar/delegation"
        tokenPath: "/oauth2/token"
        url: "http://keyrock-iam:5080"
      trustAnchor:
        id: "EU.EORI.FIWARESATELLITE"
        tokenPath: "/token"
        trustedListPath: "/trusted_list"
        url: "http://tir-iam"
    trustedVerifiers:
      - http://verifier-iam:7070/.well-known/jwks
    providerId: "did:key:z6MksU6tMfbaDzvaRe5oFE4eZTVTV4HJM4fmQWWGsDGQVsEr"
  additionalEnvVars:
    - name: ISHARE_CERTIFICATE_PATH
      value: /iShare/cert
    - name: ISHARE_KEY_PATH
      value: /iShare/key
  service:
    type: LoadBalancer
    port: 7080

kong:
  nameOverride: kong-iam
  image:
    repository: quay.io/fiware/kong
    tag: "0.5.6"
    pullPolicy: IfNotPresent
  deployment:
    serviceAccount:
      create: false
  replicaCount: 1
  env:
    database: "off"
    nginx_worker_processes: "2"
    proxy_access_log: /dev/stdout
    admin_access_log: /dev/stdout
    admin_gui_access_log: /dev/stdout
    portal_api_access_log: /dev/stdout
    proxy_error_log: /dev/stderr
    admin_error_log: /dev/stderr
    admin_gui_error_log: /dev/stderr
    portal_api_error_log: /dev/stderr
    prefix: /kong_prefix/
    log_level: debug
    nginx_proxy_large_client_header_buffers: "16 128k"
    nginx_proxy_http2_max_field_size: "32k"
    nginx_proxy_http2_max_header_size: "32k"
    plugins: bundled,pep-plugin,ngsi-ishare-policies
    pluginserver_names: pep-plugin
    pluginserver_pep_plugin_start_cmd: "/go-plugins/pep-plugin"
    pluginserver_pep_plugin_query_cmd: "/go-plugins/pep-plugin -dump"
  ingressController:
    enabled: false
    installCRDs: false
    rbac:
      create: false
  proxy:
    http:
      servicePort: 8070
      containerPort: 8070
    tls:
      enabled: false
  admin:
    enabled: true
    type: ClusterIP
    http:
      enabled: true
      servicePort: 8001
      containerPort: 8001
  status:
    enabled: true
    http:
      enabled: true
      containerPort: 9102
  dblessConfig:
    configMap: ""
    secret: ""
    config: |
      _format_version: "2.1"
      _transform: true

      services:
        - host: "orion-ld"
          name: "orion-ld"
          port: 1026
          protocol: http

          routes:
            - name: orion-ld
              paths:
                - /orion-ld
              strip_path: true

          plugins:
            - name: pep-plugin
              config:
                pathprefix: "/orion-ld"
                authorizationendpointtype: ExtAuthz
                authorizationendpointaddress: http://pdp-iam:7080/authz

            - name: request-transformer
              config:
                remove:
                  headers:
                    - Authorization
                    - authorization

orion:
  fullnameOverride: orion-ld
  test:
    enabled: false
  mongo:
    enabled: true